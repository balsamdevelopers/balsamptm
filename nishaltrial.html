<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ancient Space Sciences Quiz - Test Your Cosmic Knowledge</title>
    <meta name="description" content="Journey through the quiz exploring how ancient civilizations understood the cosmos. Test your knowledge of ancient astronomy, star catalogs, and cosmic discoveries.">
    <style>
        * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
    background: linear-gradient(180deg, #0f0a1e 0%, #1a0f2e 50%, #0f0a1e 100%);
    color: #e5e7f0;
    min-height: 100vh;
    overflow-x: hidden;
}

#spaceCanvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

#app {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.screen {
    width: 100%;
    max-width: 800px;
    animation: fadeIn 0.5s ease-out;
}

.screen.hidden {
    display: none;
}

.card {
    background: rgba(30, 20, 50, 0.8);
    backdrop-filter: blur(10px);
    border: 2px solid rgba(147, 112, 219, 0.3);
    border-radius: 12px;
    padding: 32px;
    box-shadow: 0 0 30px rgba(147, 112, 219, 0.4);
}

.title {
    font-size: 48px;
    font-weight: bold;
    text-align: center;
    background: linear-gradient(135deg, #9370db, #4169e1, #00ced1);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 16px;
    text-shadow: 0 0 20px rgba(0, 206, 209, 0.5);
}

.subtitle {
    text-align: center;
    font-size: 18px;
    color: #b5b5c3;
    margin-bottom: 32px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 16px;
    margin: 32px 0;
}

.stat-box {
    text-align: center;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid;
}

.stat-box.primary {
    background: rgba(147, 112, 219, 0.1);
    border-color: rgba(147, 112, 219, 0.3);
}

.stat-box.secondary {
    background: rgba(65, 105, 225, 0.1);
    border-color: rgba(65, 105, 225, 0.3);
}

.stat-box.accent {
    background: rgba(0, 206, 209, 0.1);
    border-color: rgba(0, 206, 209, 0.3);
}

.stat-number {
    font-size: 32px;
    font-weight: bold;
}

.stat-box.primary .stat-number {
    color: #9370db;
}

.stat-box.secondary .stat-number {
    color: #4169e1;
}

.stat-box.accent .stat-number {
    color: #00ced1;
}

.stat-label {
    font-size: 12px;
    color: #b5b5c3;
    margin-top: 4px;
}

.btn-primary {
    width: 100%;
    padding: 16px 32px;
    font-size: 18px;
    font-weight: 600;
    color: white;
    background: linear-gradient(135deg, #9370db, #4169e1);
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 0 30px rgba(147, 112, 219, 0.4);
    margin-top: 32px;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 40px rgba(147, 112, 219, 0.6);
}

.progress-section {
    margin-bottom: 24px;
}

.progress-info {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    color: #b5b5c3;
    margin-bottom: 8px;
}

.score-badge {
    font-weight: 600;
    color: #9370db;
}

.progress-bar {
    height: 8px;
    background: rgba(147, 112, 219, 0.2);
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #9370db, #4169e1);
    transition: width 0.3s ease;
    width: 0%;
}

.category-badge {
    display: inline-block;
    padding: 6px 12px;
    background: rgba(65, 105, 225, 0.2);
    border: 1px solid rgba(65, 105, 225, 0.3);
    border-radius: 20px;
    font-size: 12px;
    color: #4169e1;
    margin-bottom: 16px;
}

.question-text {
    font-size: 24px;
    font-weight: bold;
    line-height: 1.5;
    margin-bottom: 24px;
    color: #e5e7f0;
}

.options-grid {
    display: grid;
    gap: 12px;
    margin-bottom: 24px;
}

.option-btn {
    width: 100%;
    padding: 16px 24px;
    text-align: left;
    font-size: 16px;
    background: transparent;
    border: 2px solid rgba(147, 112, 219, 0.3);
    border-radius: 8px;
    color: #e5e7f0;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
}

.option-btn:hover:not(:disabled) {
    background: rgba(147, 112, 219, 0.2);
    border-color: rgba(147, 112, 219, 0.5);
    transform: scale(1.02);
}

.option-btn:disabled {
    cursor: not-allowed;
}

.option-label {
    margin-right: 12px;
    font-weight: bold;
    color: #9370db;
}

.option-btn.correct {
    background: rgba(34, 197, 94, 0.2);
    border-color: #22c55e;
}

.option-btn.incorrect {
    background: rgba(239, 68, 68, 0.2);
    border-color: #ef4444;
}

.option-btn.disabled {
    opacity: 0.5;
}

.option-icon {
    margin-left: auto;
    font-size: 20px;
}

.result-title {
    font-size: 48px;
    font-weight: bold;
    text-align: center;
    background: linear-gradient(135deg, #9370db, #4169e1, #00ced1);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 32px;
}

.result-score {
    text-align: center;
    padding: 32px 0;
}

.final-score {
    font-size: 80px;
    font-weight: bold;
    color: #9370db;
    animation: pulse 2s ease-in-out infinite;
}

.percentage {
    font-size: 32px;
    font-weight: 600;
    color: #4169e1;
    margin-top: 16px;
}

.result-message {
    text-align: center;
    font-size: 20px;
    font-weight: 500;
    margin: 24px 0;
    color: #e5e7f0;
}

.result-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin: 32px 0;
}

.result-stat {
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    border: 1px solid;
}

.result-stat.correct {
    background: rgba(34, 197, 94, 0.1);
    border-color: rgba(34, 197, 94, 0.3);
}

.result-stat.incorrect {
    background: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
}

.result-stat-number {
    font-size: 28px;
    font-weight: bold;
}

.result-stat.correct .result-stat-number {
    color: #22c55e;
}

.result-stat.incorrect .result-stat-number {
    color: #ef4444;
}

.result-stat-label {
    font-size: 12px;
    color: #b5b5c3;
    margin-top: 4px;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

@media (max-width: 768px) {
    .title {
        font-size: 32px;
    }
    
    .question-text {
        font-size: 20px;
    }
    
    .final-score {
        font-size: 60px;
    }
    
    .card {
        padding: 24px;
    }
}
    </style>
</head>
<body>
    <canvas id="spaceCanvas"></canvas>
    
    <div id="app">
        <!-- Start Screen -->
        <div id="startScreen" class="screen">
            <div class="card">
                <h1 class="title">TimeQuest: Ancient Skywatchers </h1>
                <p class="subtitle">Journey through 80 questions exploring how ancient civilizations understood the cosmos</p>
                
                <div class="stats-grid">
                    <div class="stat-box primary">
                        <div class="stat-number">80</div>
                        <div class="stat-label">Questions</div>
                    </div>
                    <div class="stat-box secondary">
                        <div class="stat-number">10+</div>
                        <div class="stat-label">Categories</div>
                    </div>
                    <div class="stat-box accent">
                        <div class="stat-number">∞</div>
                        <div class="stat-label">Knowledge</div>
                    </div>
                </div>
                
                <button id="startButton" class="btn-primary">Begin Your Cosmic Journey</button>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quizScreen" class="screen hidden">
            <div class="card">
                <div class="progress-section">
                    <div class="progress-info">
                        <span id="questionNumber">Question 1 of 80</span>
                        <span id="scoreDisplay" class="score-badge">Score: 0</span>
                    </div>
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                </div>

                <div class="category-badge" id="categoryBadge">Category</div>
                <h3 id="questionText" class="question-text">Question will appear here</h3>

                <div id="optionsContainer" class="options-grid">
                    <!-- Options will be inserted here -->
                </div>

                <button id="nextButton" class="btn-primary hidden">Next Question</button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="resultScreen" class="screen hidden">
            <div class="card">
                <h2 class="result-title">Quiz Complete!</h2>
                
                <div class="result-score">
                    <div id="finalScore" class="final-score">0/80</div>
                    <div id="percentage" class="percentage">0%</div>
                </div>
                
                <p id="resultMessage" class="result-message">Keep learning!</p>
                
                <div class="result-stats">
                    <div class="result-stat correct">
                        <div id="correctCount" class="result-stat-number">0</div>
                        <div class="result-stat-label">Correct</div>
                    </div>
                    <div class="result-stat incorrect">
                        <div id="incorrectCount" class="result-stat-number">0</div>
                        <div class="result-stat-label">Incorrect</div>
                    </div>
                </div>
                
                <button id="restartButton" class="btn-primary">Restart Journey</button>
            </div>
        </div>
    </div>

    <script>
// Quiz Questions - will be loaded from CSV
let quizQuestions = [];

// Quiz State
let currentQuestion = 0;
let score = 0;
let selectedAnswer = null;

// DOM Elements
const startScreen = document.getElementById('startScreen');
const quizScreen = document.getElementById('quizScreen');
const resultScreen = document.getElementById('resultScreen');
const startButton = document.getElementById('startButton');
const nextButton = document.getElementById('nextButton');
const restartButton = document.getElementById('restartButton');
const questionNumber = document.getElementById('questionNumber');
const scoreDisplay = document.getElementById('scoreDisplay');
const progressFill = document.getElementById('progressFill');
const categoryBadge = document.getElementById('categoryBadge');
const questionText = document.getElementById('questionText');
const optionsContainer = document.getElementById('optionsContainer');
const finalScore = document.getElementById('finalScore');
const percentage = document.getElementById('percentage');
const resultMessage = document.getElementById('resultMessage');
const correctCount = document.getElementById('correctCount');
const incorrectCount = document.getElementById('incorrectCount');

// Load questions from CSV file
async function loadQuestions() {
    try {
        const response = await fetch('quiz_questions.csv');
        const csvText = await response.text();
        
        // Parse CSV
        const lines = csvText.split('\n');
        const headers = lines[0].split(',');
        
        // Skip header row and parse data
        for (let i = 1; i < lines.length; i++) {
            if (lines[i].trim() === '') continue;
            
            // Handle CSV parsing with quoted fields
            const row = parseCSVLine(lines[i]);
            
            if (row.length >= 8) {
                quizQuestions.push({
                    id: parseInt(row[0]),
                    question: row[1],
                    options: [row[2], row[3], row[4], row[5]],
                    correctAnswer: parseInt(row[6]),
                    category: row[7]
                });
            }
        }
        
        console.log(`Loaded ${quizQuestions.length} questions successfully!`);
        startButton.disabled = false;
        startButton.textContent = 'Start Quiz';
        
    } catch (error) {
        console.error('Error loading questions:', error);
        alert('Failed to load quiz questions. Please make sure quiz_questions.csv is in the same directory.');
    }
}

// Helper function to parse CSV line with proper handling of quoted fields
function parseCSVLine(line) {
    const result = [];
    let current = '';
    let inQuotes = false;
    
    for (let i = 0; i < line.length; i++) {
        const char = line[i];
        
        if (char === '"') {
            inQuotes = !inQuotes;
        } else if (char === ',' && !inQuotes) {
            result.push(current.trim());
            current = '';
        } else {
            current += char;
        }
    }
    
    result.push(current.trim());
    return result;
}

// Space Background Animation
const canvas = document.getElementById('spaceCanvas');
const ctx = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const stars = [];
for (let i = 0; i < 200; i++) {
    stars.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        radius: Math.random() * 2,
        speed: Math.random() * 0.5 + 0.1,
        opacity: Math.random()
    });
}

function animateSpace() {
    ctx.fillStyle = 'rgba(15, 10, 30, 0.1)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    stars.forEach(star => {
        star.y += star.speed;
        if (star.y > canvas.height) {
            star.y = 0;
            star.x = Math.random() * canvas.width;
        }

        star.opacity += (Math.random() - 0.5) * 0.1;
        star.opacity = Math.max(0.1, Math.min(1, star.opacity));

        ctx.beginPath();
        ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
        ctx.fill();

        if (star.radius > 1) {
            const gradient = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, star.radius * 3);
            gradient.addColorStop(0, `rgba(147, 197, 253, ${star.opacity * 0.3})`);
            gradient.addColorStop(1, 'rgba(147, 197, 253, 0)');
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(star.x, star.y, star.radius * 3, 0, Math.PI * 2);
            ctx.fill();
        }
    });

    requestAnimationFrame(animateSpace);
}

animateSpace();

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

// Quiz Functions
function startQuiz() {
    if (quizQuestions.length === 0) {
        alert('Questions are still loading. Please wait...');
        return;
    }
    
    startScreen.classList.add('hidden');
    quizScreen.classList.remove('hidden');
    displayQuestion();
}

function displayQuestion() {
    const question = quizQuestions[currentQuestion];
    
    questionNumber.textContent = `Question ${currentQuestion + 1} of ${quizQuestions.length}`;
    scoreDisplay.textContent = `Score: ${score}`;
    progressFill.style.width = `${((currentQuestion + 1) / quizQuestions.length) * 100}%`;
    categoryBadge.textContent = question.category;
    questionText.textContent = question.question;
    
    optionsContainer.innerHTML = '';
    question.options.forEach((option, index) => {
        const button = document.createElement('button');
        button.className = 'option-btn';
        button.innerHTML = `
            <span class="option-label">${String.fromCharCode(65 + index)}.</span>
            ${option}
        `;
        button.onclick = () => selectAnswer(index);
        optionsContainer.appendChild(button);
    });
    
    nextButton.classList.add('hidden');
    selectedAnswer = null;
}

function selectAnswer(index) {
    if (selectedAnswer !== null) return;
    
    selectedAnswer = index;
    const question = quizQuestions[currentQuestion];
    const buttons = optionsContainer.querySelectorAll('.option-btn');
    
    if (index === question.correctAnswer) {
        score++;
        scoreDisplay.textContent = `Score: ${score}`;
    }
    
    buttons.forEach((btn, i) => {
        btn.disabled = true;
        if (i === question.correctAnswer) {
            btn.classList.add('correct');
            btn.innerHTML += '<span class="option-icon">✓</span>';
        } else if (i === index) {
            btn.classList.add('incorrect');
            btn.innerHTML += '<span class="option-icon">✗</span>';
        } else {
            btn.classList.add('disabled');
        }
    });
    
    nextButton.classList.remove('hidden');
}

function nextQuestion() {
    if (currentQuestion < quizQuestions.length - 1) {
        currentQuestion++;
        displayQuestion();
    } else {
        showResults();
    }
}

function showResults() {
    quizScreen.classList.add('hidden');
    resultScreen.classList.remove('hidden');
    
    const percent = (score / quizQuestions.length) * 100;
    const incorrect = quizQuestions.length - score;
    
    finalScore.textContent = `${score}/${quizQuestions.length}`;
    percentage.textContent = `${percent.toFixed(1)}%`;
    correctCount.textContent = score;
    incorrectCount.textContent = incorrect;
    
    if (percent >= 90) {
        resultMessage.textContent = "🌟 Stellar Performance! You're an Ancient Astronomy Master!";
    } else if (percent >= 75) {
        resultMessage.textContent = "🌙 Excellent! You have impressive knowledge of ancient space sciences!";
    } else if (percent >= 60) {
        resultMessage.textContent = "⭐ Good Job! You understand ancient astronomical concepts well!";
    } else if (percent >= 45) {
        resultMessage.textContent = "🪐 Not bad! Keep exploring the cosmos of ancient knowledge!";
    } else {
        resultMessage.textContent = "☄️ Keep learning! The universe of ancient astronomy awaits your discovery!";
    }
}

function restartQuiz() {
    currentQuestion = 0;
    score = 0;
    selectedAnswer = null;
    resultScreen.classList.add('hidden');
    startScreen.classList.remove('hidden');
}

// Event Listeners
startButton.addEventListener('click', startQuiz);
nextButton.addEventListener('click', nextQuestion);
restartButton.addEventListener('click', restartQuiz);

// Initialize - Load questions when page loads
startButton.disabled = true;
startButton.textContent = 'Loading Questions...';
loadQuestions();
</script>
</body>
</html>